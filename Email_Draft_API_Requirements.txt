**נושא: בקשת מידע ואפיון ממשקים – פרויקט אוטומציה להיזון חוזר**

שלום רב,

במסגרת אפיון תהליך האוטומציה לטיפול בשגיאות היזון חוזר, הגדרנו את התהליך העסקי והלוגי. על מנת להשלים את התכנון הטכני ולחבר את מנוע האוטומציה (n8n) למערכות הארגון ("הפורטל הארגוני" ו-Salesforce), אנו זקוקים למידע טכני ומפרטי API עבור הנקודות הבאות:

### 1. מול הפורטל הארגוני (DB היזון חוזר)
הפורטל משמש כמקור האמת (Source of Truth) לנתוני ההיזון החוזר וההיסטוריה.

*   **שליפת נתונים גולמיים (היזון חוזר שבועי):**
    *   האם קיים API המאפשר לשלוף את רשומות ההיזון החוזר החדשות (דלתא שבועית)?
    *   האם ניתן לסנן מראש ברמת ה-API לפי `UpdateDate` (שבוע אחרון) ולפי `FeedbackStatus` (רק שגויים לטיפול)?
*   **בדיקת היסטוריה (עבור קודי שגיאה 4, 5, 15, 93):**
    *   אנו נדרשים לבצע שאילתה ספציפית: "האם עבור עובד X (ת.ז) במעסיק Y וקופה Z, התקבלה קליטה תקינה בחודשים קודמים?".
    *   נבקש לקבל Endpoint המאפשר בדיקה זו, או גישה לטבלת היסטוריה.
*   **ניהול מונה חזרות (Retry Counter):**
    *   האם הפורטל מנהל כיום את "מונה החזרות" (כמה שבועות רצופים אותה שגיאה קיימת)?
    *   אם כן – איך שולפים את ערך המונה הנוכחי ואת ה-`MessageID` / `ThreadID` של המייל שנשלח בשבוע שעבר (לצורך ביצוע Reply All)?
    *   אם לא – האם נדרש שנקים בסיס נתונים חיצוני לניהול המונים הללו, או שנוכל לכתוב/לעדכן שדות בפורטל דרך API?

### 2. מול Salesforce (CRM)
מערכת ה-SF משמשת לניהול הלקוחות, אנשי הקשר והמשימות למנהלות התיקים.

*   **שליפת פרטי קשר (Contact Details):**
    *   עבור כל מעסיק (לפי ח.פ/מספר לקוח), אנו צריכים לשלוף את כתובת המייל של:
        1.  איש הקשר אצל המעסיק.
        2.  הסוכן המתפעל (אם קיים).
        3.  מנהלת התיק הרלוונטית (Account Manager).
    *   נבקש תיעוד ל-Endpoint מתאים (למשל `GET /Account/{id}/Contacts`).
*   **פתיחת משימות/תיעוד (Tasks/Cases):**
    *   האם נדרש לפתוח Case או Task ב-Salesforce עבור כל קבוצת שגיאות שטופלה?
    *   אם כן, נבקש את המפרט ליצירת אובייקט כזה דרך ה-API.
*   **קבלת קבצים (Attachments):**
    *   במקרים מסוימים (כמו שגיאות הדורשות צירוף מסמכים), האם יש דרך לשלוף קבצים רלוונטיים מתוך כרטיס הלקוח ב-SF?

### 3. הרשאות ואבטחת מידע
*   מהו מנגנון ההזדהות (Authentication) מול כל מערכת? (OAuth2, API Key, וכו').
*   האם יש מגבלות (Rate Limits) על כמות הקריאות?
*   האם קיימת סביבת Staging/Sandbox לכל אחת מהמערכות לצורך פיתוח ובדיקות?

נודה לקבלת מסמכי Swagger/OpenAPI או דוקומנטציה טכנית עבור הנ"ל.

בברכה,
צוות הפרויקט

